import os
import re

def combine_txt_files(folder_path):
    # Pattern to extract the page number from filename
    pattern = re.compile(r"page_(\d+)_output\.txt")

    # Get all .txt files in the folder
    files = [f for f in os.listdir(folder_path) if f.endswith("_output.txt")]

    # Sort by page number (numeric sort, not lexicographic)
    files_sorted = sorted(files, key=lambda x: int(pattern.search(x).group(1)))

    combined_content = ""

    # Read each file in sorted order and append content
    for file_name in files_sorted:
        file_path = os.path.join(folder_path, file_name)
        with open(file_path, "r", encoding="utf-8") as f:
            combined_content += f.read() + "\n"

    # Save combined file
    output_file = os.path.join(folder_path, "combined_output.txt")
    with open(output_file, "w", encoding="utf-8") as f:
        f.write(combined_content)

    print(f"Combined file created: {output_file}")

# Example usage:
# combine_txt_files("/path/to/outputs")
