- from typing import List, Literal, Union, Annotated
+ from typing import List, Literal, Union

...  # your BoolStep and FinalDecisionStep stay exactly as you wrote them

- # Discriminated union on "name"
- Step = Annotated[Union[BoolStep, FinalDecisionStep], Field(discriminator="name")]
+ # Plain union (no discriminator) to satisfy strict JSON Schema validators
+ Step = Union[BoolStep, FinalDecisionStep]
