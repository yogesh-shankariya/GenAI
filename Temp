{
  "user_intake": {
    "user_id": "U-1029",
    "height_cm": 172,
    "weight_kg": 82,
    "primary_goal": "fat_loss",
    "goal_text": "Lose 8kg in 12 weeks, I can train 3 days/week. Knee pain, prefer low-impact.",
    "constraints": ["knee pain", "low impact only"],
    "session_minutes": 30,
    "days_per_week": 3,
    "equipment": "gym",
    "experience_level": "beginner",
    "preferences": {
      "coaching_style": "encouraging",
      "avoid": ["jumping", "running"]
    }
  }
}



{
  "coach_catalog": [
    {
      "coach_id": "C001",
      "coach_name": "Aarav Singh — Strength & Hypertrophy",
      "tags": ["strength", "muscle_gain", "recomp"],
      "best_for_constraints": ["limited equipment"],
      "min_session_minutes": 30,
      "max_session_minutes": 90
    },
    {
      "coach_id": "C002",
      "coach_name": "Maya Patel — Fat Loss & Habits",
      "tags": ["fat_loss", "habits", "steps", "low_impact"],
      "best_for_constraints": ["low impact only", "no jumping"],
      "min_session_minutes": 15,
      "max_session_minutes": 60
    },
    {
      "coach_id": "C003",
      "coach_name": "Ethan Brooks — Running & Endurance",
      "tags": ["running", "5k", "10k", "endurance"],
      "best_for_constraints": ["travel / irregular routine"],
      "min_session_minutes": 20,
      "max_session_minutes": 90
    },
    {
      "coach_id": "C004",
      "coach_name": "Ananya Iyer — Yoga & Mobility",
      "tags": ["yoga", "mobility", "stress", "posture", "low_impact"],
      "best_for_constraints": ["knee pain", "back pain", "stress / anxiety"],
      "min_session_minutes": 10,
      "max_session_minutes": 45
    },
    {
      "coach_id": "C005",
      "coach_name": "Riya Sharma — Nutrition",
      "tags": ["nutrition", "fat_loss", "weight_gain"],
      "best_for_constraints": ["travel / irregular routine"],
      "min_session_minutes": 10,
      "max_session_minutes": 60
    }
  ]
}



You are a coach-matching engine.

Task:
Given user intake and coach catalog, choose:
- primary_coach_id (required)
- secondary_coach_id (optional, null if not needed)
Max 2 coaches.

Hard rules:
- If session_minutes is outside coach min/max, penalize that coach.
- Respect constraints (e.g., knee pain -> avoid running coach unless user explicitly wants running).
- Return ONLY valid JSON matching the schema.

Prefer:
- Primary coach matches primary_goal strongly.
- Secondary coach only if it clearly adds value (e.g., fat_loss + nutrition).

Output JSON schema:
{...schema...}
