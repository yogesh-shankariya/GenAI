import asyncio, requests, json

async def vision_structure(schema: str, prompt: str, files: list) -> dict:
    """Async wrapper around the blocking requests.request call."""
    def _do_request():
        return requests.request(
            method="POST",
            url="https://api.horizon.elevancehealth.com/v2/images/structures",
            headers={"Authorization": f"Bearer " + authToken},
            files=files,
            data={
                "model": "gpt-4o-vision-preview",
                "prompt": prompt,
                "response_format": json.dumps({"type": "json_object"})
            },
        )

    response = await asyncio.to_thread(_do_request)
    response.raise_for_status()
    return json.loads(response.content).get("content")
