from datetime import date
from typing import List
from pydantic import BaseModel, Field


class EncounterWindow(BaseModel):
    """
    Represents a single encounter’s date span.
    """

    start_date_of_service: date = Field(
        ...,
        description="First day in the encounter range (ISO 8601 - YYYY-MM-DD)."
    )
    end_date_of_service: date = Field(
        ...,
        description="Last day in the encounter range (ISO 8601 - YYYY-MM-DD)."
    )

    model_config = {"extra": "forbid"}


class EncounterPeriodPayload(BaseModel):
    """
    Root payload expected by the LLM function call.

    • **encounters** – an array of encounter windows,  
      each containing a required start and end date.
    """

    encounters: List[EncounterWindow] = Field(
        ...,
        description="Collection of patient encounter date ranges."
    )

    model_config = {"extra": "forbid"}
