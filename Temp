import re

# Sample FAISS top 10 retrieved documents content (replace with your actual documents)
top_10_documents = [
    "Patient advised RTC prn.",
    "Referral to cardiology for evaluation.",
    "Schedule follow-up next month.",
    "Refer patient to neurology immediately.",
    "Patient recommended to consult with oncology.",
    "Referral to GI specialist advised.",
    "No referral required at this time.",
    "Refer her to Dr. John Smith for assessment.",
    "Follow-up advised.",
    "Referral to orthopedics recommended."
]

# Comprehensive regex patterns for extracting referral targets
referral_patterns = [
    r"referral to ([^.]+)",
    r"refer to ([^.]+)",
    r"refer her to ([^.]+)",
    r"refer him to ([^.]+)",
    r"consult with ([^.]+)",
    r"referring to ([^.]+)"
]

# Extraction function using regex patterns
def extract_referral_target(text):
    targets = []
    for pattern in referral_patterns:
        matches = re.findall(pattern, text, re.IGNORECASE)
        if matches:
            targets.extend([match.strip() for match in matches])
    return targets

# Extract referral targets from top 10 retrieved documents
for idx, doc_text in enumerate(top_10_documents, 1):
    referral_targets = extract_referral_target(doc_text)
    if referral_targets:
        print(f"Document {idx}: '{doc_text}'")
        for target in referral_targets:
            print(f"  â†’ Referral Target: {target}")
